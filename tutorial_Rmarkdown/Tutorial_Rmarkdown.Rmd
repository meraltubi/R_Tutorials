---
title: "R_Markdown_Tutorial_2022"
author: "Meral Tubi"
date: "8/29/2022"
output: 
  prettydoc::html_pretty:
    theme: cayman
    highlight: github
    toc: true
    number_sections: true

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

2 hastags (##) gives the largest title  
1 hastag (#) gives a smaller title  
and no hashtag (#) provides supporting text  
2 trailing spaces provides a new line of text  

# Rmarkdown - Introduction

https://rmarkdown.rstudio.com/lesson-1.html
https://rmarkdown.rstudio.com/gallery
https://rmarkdown.rstudio.com/docs/articles/rmarkdown.html

#R Markdown - Cheat Sheet

https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf

# Links to Themes 
https://www.datadreaming.org/post/r-markdown-theme-gallery/

# Knit a document
When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. 


# Import libraries
```{r libraries, message=FALSE, warning = FALSE}
library(ggplot2)
library(plyr)
library(dplyr)
```

## Chunk options 
Chunk Options  
Chunk output can be customized with knitr options, arguments set in the {} of a chunk header. Above, we use five arguments:

include = FALSE prevents code and results from appearing in the finished file. R Markdown still runs the code in the chunk, and the results can be used by other chunks.  
echo = FALSE prevents code, but not the results from appearing in the finished file. This is a useful way to embed figures.  
message = FALSE prevents messages that are generated by code from appearing in the finished file.  
warning = FALSE prevents warnings that are generated by code from appearing in the finished.  
fig.cap = "..." adds a caption to graphical results.  

## Import CSV files
 
You can import your data files like this:

```{r import}
demogs <-read.csv("/Volumes/GoogleDrive/My Drive/R_Scripts/Braskie_R_Workshop/tutorial_01/orig_files/demogs_fordf1df2.csv")
df1 <-read.csv("/Volumes/GoogleDrive/My Drive/R_Scripts/Braskie_R_Workshop/tutorial_01/orig_files/df1_corticalthickness.csv")
df2 <-read.csv("/Volumes/GoogleDrive/My Drive/R_Scripts/Braskie_R_Workshop/tutorial_01/orig_files/df2_corticalthickness.csv")

```

# View your data
```{r view}
summary(demogs)
```

View your data with multiple lines of code
```{r view2}
ls() # list objects in the working environment
names(demogs) # list the variables in mydata
str(demogs) # list the structure of mydata
dim(demogs) # dimensions of an object
class(demogs) # class of an object (numeric, matrix, data frame, etc)

#demogs # print mydata
head(demogs) #the head of the entire dataframe
head(demogs, n=15) #the head of the entire dataframe

head(demogs$SubjID)# the head of jsut the column
tail(demogs$Sex..IDA.) # the tail of just the column 
#demogs$Scan.date #pull just a column

demogs$SubjID[10] #the 10th subject
demogs$SubjID[10:15] #the 10-15th subjects
demogs$SubjID[c(10:15,20)]
demogs[demogs$SubjID==9024,]
demogs[1:5,]
demogs[, 1:2]

```


# Merge Plots
```{r merge, echo=FALSE}

demogs.df1<-join(demogs, df1, by="SubjID", type="left")
head(demogs.df1)
str(demogs.df1)
```

# Manipulate Data
```{r manipulate, echo=FALSE}

demogs.df1$age.z <-scale(demogs.df1$Age..IDA.) #standardize a variable


```

# Including Plots
You can also embed plots, for example:

## boxplot
```{r plot}
boxplot(demogs$Age..IDA.)
```

```{r plot2}
hist(demogs$Age..IDA.)

```
## histogram

```{r hist, echo=FALSE}
hist(demogs.df1$age.z)
```

#Linear Regression
```{r regression, echo=FALSE}
model1 <- lm(L_fusiform_thickavg~age.z, data=demogs.df1)
summary(model1)
plot(model1)
```
## Plot Summary Residuals of Linear Regression
```{r regression.resid, echo=FALSE}

plot(model1)
```

# Linear Regression Interactions

```{r interact, echo=FALSE, message=FALSE}
model2 <- lm(L_fusiform_thickavg~Age..IDA.*Sex..IDA., data=demogs.df1)
summary(model2)

```

## Plot Linear Regression Interactions
```{r interactplot, echo=FALSE, warning=FALSE}

ggplot(demogs.df1, aes(Age..IDA., L_fusiform_thickavg, colour = Sex..IDA.)) + geom_point() +geom_smooth(method='lm')

```


## Remove subject without a sex
```{r removeX, echo=FALSE, warning=FALSE}
unique(demogs.df1$Sex..IDA.)
table(demogs.df1$Sex..IDA.)
demogs.df1.xremoved<-demogs.df1[!(demogs.df1$Sex..IDA.=="X"),]
table(demogs.df1.xremoved$Sex..IDA.)

```

## Replot Linear Regression Interactions
```{r interactplot2, echo=FALSE, warning=FALSE}

ggplot(demogs.df1.xremoved, aes(Age..IDA., L_fusiform_thickavg, colour = Sex..IDA.)) + geom_point() +geom_smooth(method='lm')

```